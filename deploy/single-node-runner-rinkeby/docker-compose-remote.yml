version: '3'

services:
  onomy:
    image: onomy/onomy-single-node-runner-rinkeby:latest
    restart: on-failure
    container_name: onomy-single-node-runner-rinkeby
    environment:
      ETH_RPC_ADDRESS: https://eth-rinkeby.alchemyapi.io/v2/...
    volumes:
       - ./data:/root/.onomy/data
    ports:
      # onomy
      - 26656:26656
      - 26657:26657
      - 1317:1317 # swagger
      - 61278:61278
      - 9090:9090
      - 8000:8000 # fauset

  watchtower:
    image: containrrr/watchtower
    restart: on-failure
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - /root/.docker/config.json:/config.json
    command: --interval 30